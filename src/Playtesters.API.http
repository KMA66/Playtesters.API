@host = http://localhost:5183
@adminKey = your-API-key

### ---------------------------------------------------------
### CREATE TESTER
### POST /api/testers
### ---------------------------------------------------------

POST {{host}}/api/testers
Content-Type: application/json
X-Api-Key: {{adminKey}}

{
  "name": "NewTester123"
}

###

### ---------------------------------------------------------
### UPDATE TESTER (by name)
### PATCH /api/testers/{name}
###
### This endpoint allows partial updates to a tester:
### 1. "accessKey":
###    - null        => leave the current AccessKey unchanged
###    - "" (empty)  => revoke the AccessKey (sets it to null)
###    - GUID        => update AccessKey to the provided valid GUID
###
### 2. "name":
###    - null        => keep the current Name unchanged
###    - non-empty   => update the tester's Name (min length: 3)
###    - invalid/empty/whitespace => returns 400 Bad Request
###
### 3. "totalHoursPlayed":
###    - null        => leave the current TotalHoursPlayed unchanged
###    - >= 0        => update the tester's total hours played
###    - < 0         => returns 400 Bad Request
### ---------------------------------------------------------

PATCH {{host}}/api/testers/Tester123
Content-Type: application/json
X-Api-Key: {{adminKey}}

{
  "accessKey": ""
}

###

### ---------------------------------------------------------
### LIST ALL TESTERS
### GET /api/testers
###
### Optional Query Parameters:
### - orderBy: sorting strategy (case-insensitive).
###   Allowed values:
###   - CreatedAtAsc
###   - CreatedAtDesc
###   - TotalHoursPlayedAsc
###   - TotalHoursPlayedDesc
### ---------------------------------------------------------

GET {{host}}/api/testers?orderBy=TotalHoursPlayedDesc
X-Api-Key: {{adminKey}}

###

### ---------------------------------------------------------
### VALIDATE ACCESS (Public)
### POST /api/testers/validate-access
###
### This endpoint checks whether a given tester's access key is valid.
### - If the key is valid, it returns the tester's name. 
### - If the key is invalid or missing, it returns an error message.
### ---------------------------------------------------------

POST {{host}}/api/testers/validate-access
Content-Type: application/json

{
  "accessKey": "some-guid-here"
}

###

### ---------------------------------------------------------
### UPDATE PLAYTIME (Public)
### PATCH /api/testers/{accessKey}/playtime
###
### Updates the total hours played for a tester.
### This endpoint is public and should be called by the Unity client
### to report how long the tester has been playing.
### The accessKey uniquely identifies the tester and must be provided
### in the URL path. The request increments the stored TotalHoursPlayed
### by the given value in hours (double).
### ---------------------------------------------------------

PATCH {{host}}/api/testers/{accessKey}/playtime
Content-Type: application/json

{
  "hoursPlayed": "1.5"
}

###

### ---------------------------------------------------------
### GET ACCESS HISTORY (Paged + Optional Filters)
### GET /api/testers/access-history
###
### Optional Query Parameters:
### - name: filter by tester name
### - ipAddress: filter by IP
### - country: filter by country name
### - fromDate: start date (ISO 8601)
### - toDate: end date (ISO 8601)
### - pageNumber: page number
### - pageSize: results per page
###
### Example below uses all filters.
### ---------------------------------------------------------

GET {{host}}/api/testers/access-history?name=Tester123&ipAddress=127.0.0.1&fromDate=2024-01-01&toDate=2025-01-01&pageNumber=1&pageSize=20
X-Api-Key: {{adminKey}}

###

### ---------------------------------------------------------
### REVOKE ALL KEYS
### POST /api/testers/revoke-all-keys
###
### This endpoint revokes the AccessKey for all testers.
### - Idempotent: calling it multiple times has the same effect.
### - After calling it, all testers will have AccessKey = null.
### - No body is required.
### ---------------------------------------------------------

POST {{host}}/api/testers/revoke-all-keys
Content-Type: application/json
X-Api-Key: {{adminKey}}

###
